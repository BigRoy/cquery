

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Overview &mdash; cQuery 0.0.2 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="cQuery 0.0.2 documentation" href="index.html"/>
        <link rel="next" title="Quickstart" href="quickstart.html"/>
        <link rel="prev" title="Documentation Overview" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> cQuery</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-it-works">How it works</a></li>
<li class="toctree-l2"><a class="reference internal" href="#quick-example">Quick example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#selectors">Selectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="#up-or-down">Up or Down</a></li>
<li class="toctree-l2"><a class="reference internal" href="#architecture">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="#performance">Performance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#install">Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#command-line">Command-line</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#some-content">Some Content</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#tag">Tag</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#query">Query</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#python">Python</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#installing">Installing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="schemaless.html">Schemaless</a><ul>
<li class="toctree-l2"><a class="reference internal" href="schemaless.html#why-schemaless">Why Schemaless?</a></li>
<li class="toctree-l2"><a class="reference internal" href="schemaless.html#motivation">Motivation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference.html#module-cquery">cquery.py</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">cQuery</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Overview</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/overview.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p>cQuery is a library for metadata queries within a file-system, built to solve the issue of quickly finding and filtering content.</p>
<div class="section" id="how-it-works">
<h2>How it works<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h2>
<p>Given a directory such as:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>/projects/spiderman/assets/Peter/animLow
</pre></div>
</div>
<p>cQuery answers the questions:</p>
<blockquote>
<div><ul class="simple">
<li>What is my Asset?</li>
<li>What is my Project?</li>
<li>What rigs do I have?</li>
<li>Am I Orange?</li>
<li>How many shaders do I contain?</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="quick-example">
<h2>Quick example<a class="headerlink" href="#quick-example" title="Permalink to this headline">¶</a></h2>
<p>Here is how it might look when tagging and querying a content hierarchy for a feature animation project.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd </span>spiderman/assets
<span class="nv">$ </span>cquery Asset.class --tag --root<span class="o">=</span>Peter
<span class="nv">$ </span>cquery Asset.class --tag --root<span class="o">=</span>Goblin
<span class="nv">$ </span><span class="nb">cd</span> ../shots
<span class="nv">$ </span>cquery Shot.class --tag --root<span class="o">=</span>1000
<span class="nv">$ </span>cquery Shot.class --tag --root<span class="o">=</span>2000
<span class="nv">$ </span><span class="nb">cd</span> ..
<span class="nv">$ </span><span class="nb">cd</span> ..
<span class="nv">$ </span>cquery .Asset
c:/projects/spiderman/assets/Peter
c:/projects/spiderman/assets/Goblin
</pre></div>
</div>
</div>
<div class="section" id="selectors">
<h2>Selectors<a class="headerlink" href="#selectors" title="Permalink to this headline">¶</a></h2>
<p>The idea of selectors are adopted from CSS3 and its use in jQuery (from which the name cQuery was derived). jQuery allows users to operate on the Document Object Model, or DOM, using CSS3 selectors to locate the appropriate Nodes. Similarly, cQuery operates on the Content Object Model, or COM, using CSS3 selectors to locate the appropriate folders.</p>
</div>
<div class="section" id="up-or-down">
<h2>Up or Down<a class="headerlink" href="#up-or-down" title="Permalink to this headline">¶</a></h2>
<p>Starting from a root directory, a query can either be made up or down. To find descending matches of a given directory, you would use DOWN. To instead query for ascending matches, you would use UP. To query one-self only, you would use NONE.</p>
<p>Here is how that might look used in Python:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Find the associated project of the asset Peter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">first_match</span><span class="p">(</span><span class="s">&quot;/projects/spiderman/assets/Peter&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">selector</span><span class="o">=</span><span class="s">&#39;.Project&#39;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">UP</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Find all textures</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">(</span><span class="s">&quot;/projects/spiderman/assets/Peter&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">selector</span><span class="o">=</span><span class="s">&#39;.Texture&#39;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">DOWN</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">match</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Is this asset a Hero?</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">True</span> <span class="k">if</span> <span class="n">first_match</span><span class="p">(</span><span class="s">&quot;/projects/spiderman/assets/Peter&quot;</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="n">selector</span><span class="o">=</span><span class="s">&#39;.Hero&#39;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">NONE</span><span class="p">)</span> <span class="k">else</span> <span class="bp">False</span>
</pre></div>
</div>
</div>
<div class="section" id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">¶</a></h2>
<p>cQuery works upon directories tagged with metadata to indicate its class, ID or name. The tagged directories may then be queried, either from outside a hierarchy looking in or from within a hierarchy looking out.</p>
<p>For tagging, cQuery uses the Open Metadata library; the process is quite simple - for each subdirectory within a directory, recursively look for a file by name stored within the Open Metadata container. If a match is found, return the absolute path to said directory. The name of this file is the &#8220;selector&#8221; argument of your query.</p>
<p>Example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>cquery .Asset  <span class="c"># Search for the file &quot;Asset.class&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="performance">
<h2>Performance<a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h2>
<p>cQuery operates on the hard-drive and is a seek-only algorithm and as such doesn&#8217;t perform any reads. Despite this however, disk-access is (seemingly) the prime bottle-neck. A cQuery prototype has been implemented in both Python and Go for performance comparisons, here are some results:</p>
<p><strong>Python</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Scanning a hierarchy of 3601 items</span>
<span class="c"># 1 queries, 7 matches in 1.494072 seconds</span>
<span class="c"># 1 queries, 7 matches in 1.480471 seconds</span>
<span class="c"># 1 queries, 7 matches in 1.477589 seconds</span>
<span class="c">#   Average time/query: 1.484044 seconds</span>

<span class="c"># Scanning a hierarchy of 47715 items</span>
<span class="c"># 1 queries, 14 matches in 19.888399 seconds</span>
<span class="c"># 1 queries, 14 matches in 20.078811 seconds</span>
<span class="c"># 1 queries, 14 matches in 19.879660 seconds</span>
<span class="c">#   Average time/query: 19.948957 seconds</span>
</pre></div>
</div>
<p><strong>Go</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Scanning a hierarchy of 3601 items</span>
<span class="c"># 1 queries, 7 matches in 1.425702 seconds</span>
<span class="c"># 1 queries, 7 matches in 1.420373 seconds</span>
<span class="c"># 1 queries, 7 matches in 1.419541 seconds</span>
<span class="c">#   Average time/query: 1.421872 seconds</span>

<span class="c"># Scanning a hierarchy of 47715 items</span>
<span class="c"># 1 queries, 14 matches in 18.015012 seconds</span>
<span class="c"># 1 queries, 14 matches in 17.951607 seconds</span>
<span class="c"># 1 queries, 14 matches in 17.994924 seconds</span>
<span class="c">#   Average time/query: 17.987181 seconds</span>
</pre></div>
</div>
<p>For some more encouraging results in file-system search and indexing, here are some resources:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.voidtools.com/">http://www.voidtools.com/</a></li>
<li><a class="reference external" href="http://rlocate.sourceforge.net/">http://rlocate.sourceforge.net/</a></li>
<li><a class="reference external" href="http://www.lesbonscomptes.com/recoll/">http://www.lesbonscomptes.com/recoll/</a></li>
<li><a class="reference external" href="http://grothoff.org/christian/doodle/">http://grothoff.org/christian/doodle/</a></li>
<li><a class="reference external" href="http://xapian.org/">http://xapian.org/</a></li>
</ul>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="quickstart.html" class="btn btn-neutral float-right" title="Quickstart"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Documentation Overview"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Marcus Ottosson.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.0.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>